<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 700 450">
  <defs>
    <style>
      .text { font-family: 'Segoe UI', Arial, sans-serif; }
      .title { font-size: 18px; font-weight: bold; fill: #e0e0e0; }
      .label { font-size: 12px; fill: #ccc; }
    </style>
    <marker id="fwd" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
      <path d="M0,0 L8,3 L0,6" fill="#4A90D9"/>
    </marker>
    <marker id="bwd" markerWidth="8" markerHeight="6" refX="0" refY="3" orient="auto">
      <path d="M8,0 L0,3 L8,6" fill="#E74C3C"/>
    </marker>
  </defs>

  <rect width="700" height="450" fill="#1a1a2e" rx="8"/>
  <text x="350" y="32" text-anchor="middle" class="text title">Chain Rule: 연결 고리 따라가기</text>

  <!-- === Part 1: Currency analogy === -->
  <rect x="20" y="50" width="660" height="80" fill="#252545" rx="8"/>
  <text x="350" y="75" text-anchor="middle" class="text" fill="#F1C40F" font-size="14" font-weight="bold">비유: 환율 변환</text>

  <!-- Dollar -->
  <rect x="60" y="90" width="80" height="30" fill="#27AE60" rx="6"/>
  <text x="100" y="110" text-anchor="middle" class="text" fill="#fff" font-size="12" font-weight="bold">$1</text>

  <!-- Arrow 1 -->
  <line x1="145" y1="105" x2="210" y2="105" stroke="#ccc" stroke-width="2" marker-end="url(#fwd)"/>
  <text x="178" y="98" text-anchor="middle" class="text" fill="#ccc" font-size="10">×150</text>

  <!-- Yen -->
  <rect x="215" y="90" width="80" height="30" fill="#4A90D9" rx="6"/>
  <text x="255" y="110" text-anchor="middle" class="text" fill="#fff" font-size="12" font-weight="bold">¥150</text>

  <!-- Arrow 2 -->
  <line x1="300" y1="105" x2="365" y2="105" stroke="#ccc" stroke-width="2" marker-end="url(#fwd)"/>
  <text x="333" y="98" text-anchor="middle" class="text" fill="#ccc" font-size="10">×9</text>

  <!-- Won -->
  <rect x="370" y="90" width="80" height="30" fill="#E67E22" rx="6"/>
  <text x="410" y="110" text-anchor="middle" class="text" fill="#fff" font-size="12" font-weight="bold">₩1350</text>

  <!-- Direct -->
  <text x="530" y="100" class="text" fill="#F1C40F" font-size="12">$→₩ = 150 × 9 =</text>
  <text x="530" y="118" class="text" fill="#F1C40F" font-size="14" font-weight="bold">1350 (곱하면 됨!)</text>

  <!-- === Part 2: Neural Network Chain Rule === -->
  <text x="350" y="165" text-anchor="middle" class="text" fill="#e0e0e0" font-size="14" font-weight="bold">신경망에서의 Chain Rule</text>

  <!-- Forward Pass -->
  <text x="50" y="195" class="text" fill="#4A90D9" font-size="13" font-weight="bold">Forward →</text>

  <!-- Nodes -->
  <rect x="130" y="185" width="60" height="35" fill="#2a4a7a" rx="6" stroke="#4A90D9" stroke-width="1.5"/>
  <text x="160" y="207" text-anchor="middle" class="text" fill="#fff" font-size="11">x</text>

  <line x1="195" y1="202" x2="230" y2="202" stroke="#4A90D9" stroke-width="2" marker-end="url(#fwd)"/>

  <rect x="235" y="185" width="80" height="35" fill="#2a4a7a" rx="6" stroke="#4A90D9" stroke-width="1.5"/>
  <text x="275" y="207" text-anchor="middle" class="text" fill="#fff" font-size="11">W₁x+b₁</text>

  <line x1="320" y1="202" x2="345" y2="202" stroke="#4A90D9" stroke-width="2" marker-end="url(#fwd)"/>

  <rect x="350" y="185" width="60" height="35" fill="#2a4a7a" rx="6" stroke="#4A90D9" stroke-width="1.5"/>
  <text x="380" y="207" text-anchor="middle" class="text" fill="#fff" font-size="11">ReLU</text>

  <line x1="415" y1="202" x2="440" y2="202" stroke="#4A90D9" stroke-width="2" marker-end="url(#fwd)"/>

  <rect x="445" y="185" width="80" height="35" fill="#2a4a7a" rx="6" stroke="#4A90D9" stroke-width="1.5"/>
  <text x="485" y="207" text-anchor="middle" class="text" fill="#fff" font-size="11">W₂h+b₂</text>

  <line x1="530" y1="202" x2="555" y2="202" stroke="#4A90D9" stroke-width="2" marker-end="url(#fwd)"/>

  <rect x="560" y="185" width="60" height="35" fill="#2a4a7a" rx="6" stroke="#4A90D9" stroke-width="1.5"/>
  <text x="590" y="207" text-anchor="middle" class="text" fill="#fff" font-size="11">Loss</text>

  <!-- Backward Pass -->
  <text x="50" y="270" class="text" fill="#E74C3C" font-size="13" font-weight="bold">← Backward</text>

  <rect x="130" y="255" width="60" height="35" fill="#5a2a2a" rx="6" stroke="#E74C3C" stroke-width="1.5"/>
  <text x="160" y="270" text-anchor="middle" class="text" fill="#E74C3C" font-size="9">∂L/∂x</text>
  <text x="160" y="283" text-anchor="middle" class="text" fill="#ccc" font-size="8">(최종 결과)</text>

  <line x1="230" y1="272" x2="195" y2="272" stroke="#E74C3C" stroke-width="2" marker-end="url(#bwd)"/>
  <text x="213" y="264" text-anchor="middle" class="text" fill="#E74C3C" font-size="8">× ∂z₁/∂x</text>

  <rect x="235" y="255" width="80" height="35" fill="#5a2a2a" rx="6" stroke="#E74C3C" stroke-width="1.5"/>
  <text x="275" y="270" text-anchor="middle" class="text" fill="#E74C3C" font-size="9">∂L/∂z₁</text>
  <text x="275" y="283" text-anchor="middle" class="text" fill="#ccc" font-size="8">(W₁ᵀ적용)</text>

  <line x1="345" y1="272" x2="320" y2="272" stroke="#E74C3C" stroke-width="2" marker-end="url(#bwd)"/>
  <text x="333" y="264" text-anchor="middle" class="text" fill="#E74C3C" font-size="8">× 1(z&gt;0)</text>

  <rect x="350" y="255" width="60" height="35" fill="#5a2a2a" rx="6" stroke="#E74C3C" stroke-width="1.5"/>
  <text x="380" y="270" text-anchor="middle" class="text" fill="#E74C3C" font-size="9">∂L/∂h</text>
  <text x="380" y="283" text-anchor="middle" class="text" fill="#ccc" font-size="8">(ReLU 통과)</text>

  <line x1="440" y1="272" x2="415" y2="272" stroke="#E74C3C" stroke-width="2" marker-end="url(#bwd)"/>
  <text x="428" y="264" text-anchor="middle" class="text" fill="#E74C3C" font-size="8">× ∂z₂/∂h</text>

  <rect x="445" y="255" width="80" height="35" fill="#5a2a2a" rx="6" stroke="#E74C3C" stroke-width="1.5"/>
  <text x="485" y="270" text-anchor="middle" class="text" fill="#E74C3C" font-size="9">∂L/∂z₂</text>
  <text x="485" y="283" text-anchor="middle" class="text" fill="#ccc" font-size="8">(W₂ᵀ적용)</text>

  <line x1="555" y1="272" x2="530" y2="272" stroke="#E74C3C" stroke-width="2" marker-end="url(#bwd)"/>
  <text x="543" y="264" text-anchor="middle" class="text" fill="#E74C3C" font-size="8">× ∂L/∂ŷ</text>

  <rect x="560" y="255" width="60" height="35" fill="#5a2a2a" rx="6" stroke="#E74C3C" stroke-width="1.5"/>
  <text x="590" y="277" text-anchor="middle" class="text" fill="#E74C3C" font-size="11">1</text>

  <!-- === Part 3: Key insight === -->
  <rect x="20" y="310" width="660" height="130" fill="#252545" rx="8"/>
  <text x="350" y="335" text-anchor="middle" class="text" fill="#F1C40F" font-size="14" font-weight="bold">핵심: Chain Rule = 곱셈의 연쇄</text>

  <!-- Chain formula -->
  <text x="350" y="365" text-anchor="middle" class="text" fill="#7eb8f7" font-size="14">
    ∂L/∂W₁ = ∂L/∂ŷ × ∂ŷ/∂h × ∂h/∂z₁ × ∂z₁/∂W₁
  </text>

  <!-- Warning box -->
  <rect x="60" y="385" width="280" height="40" fill="#5a2a2a" rx="6" opacity="0.5"/>
  <text x="200" y="403" text-anchor="middle" class="text" fill="#E74C3C" font-size="11" font-weight="bold">각 항이 1보다 작으면?</text>
  <text x="200" y="418" text-anchor="middle" class="text" fill="#E74C3C" font-size="10">0.5 × 0.5 × 0.5 = 0.125 → Vanishing!</text>

  <rect x="360" y="385" width="280" height="40" fill="#2a5a2a" rx="6" opacity="0.5"/>
  <text x="500" y="403" text-anchor="middle" class="text" fill="#27AE60" font-size="11" font-weight="bold">ReLU: 각 항이 0 또는 1</text>
  <text x="500" y="418" text-anchor="middle" class="text" fill="#27AE60" font-size="10">1 × 1 × 1 = 1 → 감쇠 없음!</text>
</svg>