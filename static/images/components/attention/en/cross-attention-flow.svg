<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 850 500" font-family="'Segoe UI', Arial, sans-serif">
  <rect width="850" height="500" fill="#1a1a2e"/>

  <text x="425" y="35" text-anchor="middle" fill="#e0e0e0" font-size="20" font-weight="bold">Cross-Attention: Connecting Two Worlds</text>

  <defs>
    <marker id="ca-arrow" markerWidth="7" markerHeight="5" refX="7" refY="2.5" orient="auto">
      <path d="M0,0 L7,2.5 L0,5" fill="#888"/>
    </marker>
    <marker id="ca-arrow-green" markerWidth="7" markerHeight="5" refX="7" refY="2.5" orient="auto">
      <path d="M0,0 L7,2.5 L0,5" fill="#4ecca3"/>
    </marker>
    <marker id="ca-arrow-blue" markerWidth="7" markerHeight="5" refX="7" refY="2.5" orient="auto">
      <path d="M0,0 L7,2.5 L0,5" fill="#4a90d9"/>
    </marker>
  </defs>

  <rect x="30" y="50" width="790" height="40" rx="6" fill="#2d2d4e" stroke="#555" stroke-width="1"/>
  <text x="425" y="75" text-anchor="middle" fill="#aaa" font-size="13">Analogy: An interpreter â€” A asks a question (Query), finds answers from B's information (Key/Value)</text>

  <!-- Source A: Image -->
  <rect x="30" y="120" width="200" height="200" rx="10" fill="#1e2a3e" stroke="#4a90d9" stroke-width="2"/>
  <text x="130" y="148" text-anchor="middle" fill="#4a90d9" font-size="16" font-weight="bold">A: Image Features</text>
  <text x="130" y="170" text-anchor="middle" fill="#aaa" font-size="12">(Image being denoised)</text>

  <rect x="60" y="190" width="30" height="30" rx="3" fill="#4a90d9" fill-opacity="0.3" stroke="#4a90d9" stroke-width="0.5"/>
  <rect x="95" y="190" width="30" height="30" rx="3" fill="#4a90d9" fill-opacity="0.2" stroke="#4a90d9" stroke-width="0.5"/>
  <rect x="130" y="190" width="30" height="30" rx="3" fill="#4a90d9" fill-opacity="0.4" stroke="#4a90d9" stroke-width="0.5"/>
  <rect x="165" y="190" width="30" height="30" rx="3" fill="#4a90d9" fill-opacity="0.2" stroke="#4a90d9" stroke-width="0.5"/>
  <rect x="60" y="225" width="30" height="30" rx="3" fill="#4a90d9" fill-opacity="0.2" stroke="#4a90d9" stroke-width="0.5"/>
  <rect x="95" y="225" width="30" height="30" rx="3" fill="#4a90d9" fill-opacity="0.5" stroke="#4a90d9" stroke-width="0.5"/>
  <rect x="130" y="225" width="30" height="30" rx="3" fill="#4a90d9" fill-opacity="0.3" stroke="#4a90d9" stroke-width="0.5"/>
  <rect x="165" y="225" width="30" height="30" rx="3" fill="#4a90d9" fill-opacity="0.2" stroke="#4a90d9" stroke-width="0.5"/>
  <rect x="60" y="260" width="30" height="30" rx="3" fill="#4a90d9" fill-opacity="0.3" stroke="#4a90d9" stroke-width="0.5"/>
  <rect x="95" y="260" width="30" height="30" rx="3" fill="#4a90d9" fill-opacity="0.2" stroke="#4a90d9" stroke-width="0.5"/>
  <rect x="130" y="260" width="30" height="30" rx="3" fill="#4a90d9" fill-opacity="0.4" stroke="#4a90d9" stroke-width="0.5"/>
  <rect x="165" y="260" width="30" height="30" rx="3" fill="#4a90d9" fill-opacity="0.6" stroke="#4a90d9" stroke-width="0.5"/>

  <text x="130" y="310" text-anchor="middle" fill="#4ecca3" font-size="14" font-weight="bold">Generates Query</text>

  <!-- Source B: Text -->
  <rect x="620" y="120" width="200" height="200" rx="10" fill="#1e3a2e" stroke="#4ecca3" stroke-width="2"/>
  <text x="720" y="148" text-anchor="middle" fill="#4ecca3" font-size="16" font-weight="bold">B: Text Embeddings</text>
  <text x="720" y="170" text-anchor="middle" fill="#aaa" font-size="12">(CLIP text encoder output)</text>

  <rect x="645" y="190" width="150" height="28" rx="4" fill="#4ecca3" fill-opacity="0.15" stroke="#4ecca3" stroke-width="1"/>
  <text x="720" y="209" text-anchor="middle" fill="#4ecca3" font-size="12">"a"</text>
  <rect x="645" y="224" width="150" height="28" rx="4" fill="#4ecca3" fill-opacity="0.2" stroke="#4ecca3" stroke-width="1"/>
  <text x="720" y="243" text-anchor="middle" fill="#4ecca3" font-size="12">"cute"</text>
  <rect x="645" y="258" width="150" height="28" rx="4" fill="#4ecca3" fill-opacity="0.25" stroke="#4ecca3" stroke-width="1"/>
  <text x="720" y="277" text-anchor="middle" fill="#4ecca3" font-size="12">"cat"</text>

  <text x="720" y="310" text-anchor="middle" fill="#ff6b6b" font-size="14" font-weight="bold">Generates Key, Value</text>

  <!-- Center -->
  <rect x="290" y="160" width="270" height="140" rx="12" fill="#2d2d4e" stroke="#ffd93d" stroke-width="2"/>
  <text x="425" y="190" text-anchor="middle" fill="#ffd93d" font-size="16" font-weight="bold">Cross-Attention</text>

  <text x="425" y="218" text-anchor="middle" fill="#e0e0e0" font-size="13">Q_A x K_B^T / sqrt(d_k)</text>
  <text x="425" y="240" text-anchor="middle" fill="#aaa" font-size="12">"Which text tokens are</text>
  <text x="425" y="258" text-anchor="middle" fill="#aaa" font-size="12">relevant to each image region?"</text>
  <text x="425" y="283" text-anchor="middle" fill="#e0e0e0" font-size="13">softmax x V_B</text>

  <line x1="230" y1="230" x2="285" y2="230" stroke="#4a90d9" stroke-width="2" marker-end="url(#ca-arrow-blue)"/>
  <text x="258" y="222" text-anchor="middle" fill="#4a90d9" font-size="11" font-weight="bold">Q</text>

  <line x1="615" y1="220" x2="565" y2="220" stroke="#4ecca3" stroke-width="2" marker-end="url(#ca-arrow-green)"/>
  <text x="590" y="212" text-anchor="middle" fill="#4ecca3" font-size="11" font-weight="bold">K</text>

  <line x1="615" y1="250" x2="565" y2="250" stroke="#4ecca3" stroke-width="2" marker-end="url(#ca-arrow-green)"/>
  <text x="590" y="242" text-anchor="middle" fill="#4ecca3" font-size="11" font-weight="bold">V</text>

  <line x1="425" y1="300" x2="425" y2="345" stroke="#888" stroke-width="1.5" marker-end="url(#ca-arrow)"/>

  <rect x="310" y="350" width="230" height="40" rx="8" fill="#1e3a2e" stroke="#4ecca3" stroke-width="2"/>
  <text x="425" y="375" text-anchor="middle" fill="#e0e0e0" font-size="14" font-weight="bold">Image conditioned on text</text>

  <!-- Comparison -->
  <rect x="30" y="410" width="790" height="75" rx="8" fill="#1e1e36" stroke="#555" stroke-width="1"/>
  <text x="425" y="435" text-anchor="middle" fill="#ffd93d" font-size="14" font-weight="bold">Self-Attention vs Cross-Attention</text>

  <text x="130" y="460" text-anchor="middle" fill="#4a90d9" font-size="12">Self: Q, K, V all from same source</text>
  <text x="130" y="477" text-anchor="middle" fill="#aaa" font-size="11">"Analyzing myself"</text>

  <line x1="290" y1="445" x2="290" y2="480" stroke="#555" stroke-width="1"/>

  <text x="425" y="460" text-anchor="middle" fill="#4ecca3" font-size="12">Cross: Q from A, K/V from B</text>
  <text x="425" y="477" text-anchor="middle" fill="#aaa" font-size="11">"A asks B a question"</text>

  <line x1="560" y1="445" x2="560" y2="480" stroke="#555" stroke-width="1"/>

  <text x="700" y="460" text-anchor="middle" fill="#ff9a56" font-size="12">Used in: Stable Diffusion, VLM</text>
  <text x="700" y="477" text-anchor="middle" fill="#aaa" font-size="11">"Text-conditioned image generation"</text>
</svg>
